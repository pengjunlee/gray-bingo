<html>
<head>
    <style>
        body {
          background-color: #A9DDEB;
          display: grid;
          font-family: Helvetica, sans-serif;
          font-size: 1.6rem;
          min-height: 100vh;
          place-content: center;
          margin:0;
        }
    </style>

    <script>
        function getName() {
           const url = window.location.search; //获取url中"?"符后的字串
           if (url.indexOf("?") != -1) {
              let str = url.substr(1);
              strs = str.split("&");
              for(let i = 0; i < strs.length; i ++) {
                  if(strs[i].split("=")[0] == 'name'){
                    return unescape(strs[i].split("=")[1]);
                  }
              }
           }
           return null;
        }
    </script>
</head>
<body>
<div class="json">
    <pre id="root">
</pre>
</div>

<script>

    const rootElement = document.getElementById('root');
    var name = getName();

    if( name == null){
        rootElement.innerHTML =  '{"error":"请传入正确的name参数！"}';
    }else{
    // 创建一个XMLHttpRequest对象
    var xhr = new XMLHttpRequest();

    // 设置请求方法和URL，true表示异步请求
    xhr.open('GET', window.location.origin+ '/bingo/meta/'+name, true);

    // 设置请求头部信息（可选）
    xhr.setRequestHeader('Content-Type', 'application/json');

    // 监听请求状态变化事件
    xhr.onreadystatechange = function() {
      if (xhr.readyState === XMLHttpRequest.DONE) {
        if (xhr.status === 200) {

          // 请求成功，处理返回的数据
          var response = JSON.parse(xhr.responseText);
          rootElement.innerHTML =  JSON.stringify(response,null,4);
          console.log(response);
        } else {
          // 请求失败，处理错误信息
          rootElement.innerHTML =  '{"error":"请传入正确的name参数！"}';
        }
      }
    };
// 发送请求
xhr.send();
    }

</script>
</body>
</html>